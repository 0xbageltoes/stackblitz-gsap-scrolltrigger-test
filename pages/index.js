import { useRef } from 'react';
import { gsap } from 'gsap/dist/gsap';
import { ScrollTrigger } from 'gsap/dist/ScrollTrigger';

import { useIsomorphicLayoutEffect } from '../helpers/isomorphicEffect';

gsap.registerPlugin(ScrollTrigger);

export default function Scroll() {
  const main = useRef();

  useIsomorphicLayoutEffect(() => {
    const ctx = gsap.context((self) => {
      const boxes = self.selector('.box');
      boxes.forEach((box) => {
        gsap.to(box, {
          x: 600,
          scrollTrigger: {
            trigger: box,
            start: 'top 60%',
            end: 'top 2%',
            scrub: true,
          },
        });
      });
    }, main);
    return () => ctx.revert();
  }, []);

  return (
    <div>
      <header className="header">
        <a
          className="brand"
          href="https://greensock.com/scrolltrigger"
          target="_blank"
          rel="noreferrer"
        >
          {/* <img
            className="greensock-icon"
            src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/scroll-trigger-logo-light.svg"
            height="30"
            width="100"
          /> */}
            <svg xmlns="http://www.w3.org/2000/svg" class="greensock-icon" viewBox="0 0 745 238">
      <g id="logo-scroll-trigger">
        <g id="logo-scroll">
          <path class="scroll-letter" d="M13.22,138.86a16.75,16.75,0,0,1,2-6.47,16.79,16.79,0,0,1,4.08-5.15Q30.46,134,39.94,134q4.38,0,6.68-2.09a6.61,6.61,0,0,0,2.3-5q0-5.1-6.84-8.16l-12-5.1Q15.56,107.24,15.56,94.9a19,19,0,0,1,7-15.2q7-5.91,18.51-5.91a49,49,0,0,1,22.7,5.81,17.65,17.65,0,0,1-5.3,11.73q-10.41-5-18.36-5a9.41,9.41,0,0,0-6.43,2,5.93,5.93,0,0,0-2.24,4.54q0,4.08,6.32,6.84L50,104.8a28.1,28.1,0,0,1,11.37,8.31,18.43,18.43,0,0,1,4,11.68,19.88,19.88,0,0,1-6.88,15.71q-6.89,6-19.74,6a46.45,46.45,0,0,1-13.21-2A47.34,47.34,0,0,1,13.22,138.86Z"/>
          <path class="scroll-letter" d="M100.22,116.32v-.92a23.78,23.78,0,0,0-1.17-8.56q-1.17-2.86-5-2.86a5.49,5.49,0,0,0-5.4,3.72q-1.59,3.73-1.59,11.89t2.3,11.57q2.3,3.42,7.09,3.42t11.22-4.39a11.08,11.08,0,0,1,3.57,3.62,15,15,0,0,1,2.24,4.85,25.12,25.12,0,0,1-8.77,5.71,28.85,28.85,0,0,1-10.91,2.14q-10.71,0-16.48-7.24T71.56,119q0-13,6.63-19.68a21.35,21.35,0,0,1,15.66-6.68q9,0,14.53,4.69a15.11,15.11,0,0,1,5.51,12,7.27,7.27,0,0,1-2,5.55,7.82,7.82,0,0,1-5.61,1.89A30.42,30.42,0,0,1,100.22,116.32Z"/>
          <path class="scroll-letter" d="M120,101.23a13.55,13.55,0,0,1,1.84-4.39,13,13,0,0,1,2.85-3.47q9.08.91,12.45,9.18Q141,93.48,150,93.47a27.48,27.48,0,0,1,6.63.82,30.36,30.36,0,0,1-1,7.09,26.48,26.48,0,0,1-2.76,7.09,20.6,20.6,0,0,0-5.1-.92q-5.4,0-8.77,5.51V145a38.47,38.47,0,0,1-7.44.61,43.43,43.43,0,0,1-7.75-.61V111.73Q123.79,104.08,120,101.23Z"/>
          <path class="scroll-letter" d="M199.37,98.57q7.33,7.35,7.34,21t-7.34,21q-6,6-16,6t-16-6q-7.35-7.35-7.35-21t7.35-21q6-5.91,16-5.91T199.37,98.57Zm-22.19,9.49q-1.58,4.08-1.58,11.53t1.58,11.47a6.74,6.74,0,0,0,12.34,0q1.59-4,1.58-11.47t-1.58-11.53a6.71,6.71,0,0,0-12.34,0Z"/>
          <path class="scroll-letter" d="M235.37,133.87h3a17.91,17.91,0,0,1,1.22,6.27,21.91,21.91,0,0,1-.3,4.33,71.39,71.39,0,0,1-11.73,1c-3.74,0-6.57-1.08-8.47-3.26s-2.86-5.64-2.86-10.4V70.63l.72-.72h5.91c3,0,5.12.7,6.38,2.09s1.89,3.76,1.89,7.09v50C231.09,132.27,232.51,133.87,235.37,133.87Z"/>
          <path class="scroll-letter" d="M266.07,133.87h3a17.69,17.69,0,0,1,1.22,6.27,21.91,21.91,0,0,1-.3,4.33,71.39,71.39,0,0,1-11.73,1c-3.74,0-6.56-1.08-8.47-3.26s-2.85-5.64-2.85-10.4V70.63l.71-.72h5.92q4.48,0,6.37,2.09t1.89,7.09v50Q261.79,133.87,266.07,133.87Z"/>
        </g>
        <g id="logo-trigger">
          <path class="trigger-letter" d="M302.48,83.78l.11,7.55V145a28.18,28.18,0,0,1-5.15.41,26.43,26.43,0,0,1-5.05-.41V83.78l-5.82.11H274.23a20.82,20.82,0,0,1-.41-4.24,22.18,22.18,0,0,1,.41-4.33h46.41a12.17,12.17,0,0,1,.61,4.08q0,4.48-5.71,4.49H308.4l-5.81-.11Z"/>
          <path class="trigger-letter" d="M320.74,99.29A8.37,8.37,0,0,1,324.41,94q6.73,1.63,8.88,9.08Q337.48,94,346.65,94a25.27,25.27,0,0,1,5.3.62,17.3,17.3,0,0,1-2.34,9.28c-.41-.07-1.77-.21-4.08-.41q-7.14,0-11.22,8V145a30.09,30.09,0,0,1-9.9,0V109.69Q324.41,102.76,320.74,99.29Z"/>
          <path class="trigger-letter" d="M373.58,103.06V145a29.49,29.49,0,0,1-9.8,0V107.14a6.52,6.52,0,0,0-1-4,4.16,4.16,0,0,0-3.42-1.22h-1.12a13.16,13.16,0,0,1-.41-3.47,15.58,15.58,0,0,1,.41-3.67,49.75,49.75,0,0,1,6.12-.41h1.32a7.43,7.43,0,0,1,5.77,2.3A9.12,9.12,0,0,1,373.58,103.06Zm-13-22.34a10.6,10.6,0,0,1,.82-4.38,11.21,11.21,0,0,1,5.61-1.23,9,9,0,0,1,5.2,1.23,12.13,12.13,0,0,1,0,8.77,9.22,9.22,0,0,1-5.3,1.22,10.3,10.3,0,0,1-5.51-1.22A10.65,10.65,0,0,1,360.62,80.72Z"/>
          <path class="trigger-letter" d="M401.47,145.9a14.28,14.28,0,0,1-12.64-7q-4.54-7-4.54-19.38t5.76-19.27q5.76-6.89,13.67-6.89a20.54,20.54,0,0,1,14,5.41,9.7,9.7,0,0,1,6.53-4.8,8,8,0,0,1,3.88,5.1q-2.86,2.55-2.86,9.9v30.6q0,15.39-4.79,21.21-5.42,6.63-16.63,6.63a46.34,46.34,0,0,1-17.44-3.36,10.87,10.87,0,0,1,2.65-7.55,31.72,31.72,0,0,0,14,3.26q7.24,0,10-3.92t2.75-10.77v-5A20.37,20.37,0,0,1,401.47,145.9Zm14.33-14.79V106.22q-5.3-4.78-10.4-4.79a9.22,9.22,0,0,0-8.11,4.69q-3,4.69-3,13.72t2.65,13.36q2.65,4.34,6.84,4.34Q410.7,137.54,415.8,131.11Z"/>
          <path class="trigger-letter" d="M453.19,145.9a14.28,14.28,0,0,1-12.65-7q-4.55-7-4.54-19.38t5.76-19.27q5.76-6.89,13.67-6.89a20.56,20.56,0,0,1,14,5.41A9.66,9.66,0,0,1,476,94a7.92,7.92,0,0,1,3.88,5.1Q477,101.63,477,109v30.6q0,15.39-4.79,21.21-5.41,6.63-16.63,6.63a46.38,46.38,0,0,1-17.44-3.36,10.87,10.87,0,0,1,2.65-7.55,31.77,31.77,0,0,0,14,3.26c4.82,0,8.16-1.31,10-3.92s2.76-6.21,2.76-10.77v-5A20.41,20.41,0,0,1,453.19,145.9Zm14.33-14.79V106.22q-5.31-4.78-10.41-4.79a9.22,9.22,0,0,0-8.11,4.69q-3,4.69-3,13.72t2.65,13.36c1.77,2.89,4,4.34,6.83,4.34Q462.41,137.54,467.52,131.11Z"/>
          <path class="trigger-letter" d="M528.21,123h-30.3q.31,7.24,3.06,11.22t9.18,4q6.44,0,14.18-4a10.87,10.87,0,0,1,3.16,6.43,32.47,32.47,0,0,1-19.12,5.71q-11,0-15.81-7.35t-4.85-19.12q0-11.78,5.46-19.12t15.3-7.35q9.84,0,15.15,6.17t5.3,15.66A43.22,43.22,0,0,1,528.21,123Zm-11.48-18.41a8.79,8.79,0,0,0-7.8-3.82,9.14,9.14,0,0,0-8,3.92q-2.75,3.93-3.06,11.07h21.42v-1.33A17.1,17.1,0,0,0,516.73,104.54Z"/>
          <path class="trigger-letter" d="M537.49,99.29A8.34,8.34,0,0,1,541.16,94q6.74,1.63,8.87,9.08Q554.22,94,563.4,94a25.27,25.27,0,0,1,5.3.62,17.22,17.22,0,0,1-2.35,9.28c-.4-.07-1.77-.21-4.08-.41q-7.14,0-11.22,8V145a30,30,0,0,1-9.89,0V109.69Q541.16,102.76,537.49,99.29Z"/>
        </g>
      </g>
      <g id="by-greensock">
        <path class="by-greensock-letter" d="M302.26,190.58a6.87,6.87,0,0,1,6.1,3.31c1.43,2.2,2.15,5.27,2.15,9.19s-1,6.94-3,9.06a9.47,9.47,0,0,1-7.15,3.19,24.86,24.86,0,0,1-8.48-1.57v-34.5l.3-.29h1.22a1.57,1.57,0,0,1,1.42.54,3.39,3.39,0,0,1,.35,1.76v12.45A9.78,9.78,0,0,1,302.26,190.58Zm4.92,12.25q0-4.76-1.54-7a4.37,4.37,0,0,0-3.6-2.28,7.71,7.71,0,0,0-3.85,1,9.6,9.6,0,0,0-3,2.62V211.8a13.72,13.72,0,0,0,5.19.93,5.91,5.91,0,0,0,4.85-2.57Q307.18,207.58,307.18,202.83Z"/>
        <path class="by-greensock-letter" d="M334.28,191.17l-6.76,23q-1.87,6.38-4,8.94a7.58,7.58,0,0,1-6.23,2.58,11.56,11.56,0,0,1-3.82-.64v-.25a3.33,3.33,0,0,1,.79-2.15,8.73,8.73,0,0,0,3.08.49,4.81,4.81,0,0,0,4.07-1.79,18.61,18.61,0,0,0,2.55-5.66l.15-.49a3.55,3.55,0,0,1-1.84-.56,3.73,3.73,0,0,1-1.06-1.79l-6.95-21.61a5.55,5.55,0,0,1,2-.59c.88,0,1.48.54,1.81,1.62l4,12.49c1,3,1.73,5.6,2.35,7.7a.46.46,0,0,0,.49.34L331,190.92a8.94,8.94,0,0,1,1.61-.14,5.2,5.2,0,0,1,1.62.24Z"/>
        <path class="by-greensock-letter" d="M363.29,198.32h7.44a3.21,3.21,0,0,1,2.13.54,2.38,2.38,0,0,1,.62,1.86v12.7A30.18,30.18,0,0,1,362,215.57a12.94,12.94,0,0,1-6.34-1.47,10.54,10.54,0,0,1-4.14-4,22.79,22.79,0,0,1-2.8-11.61,25,25,0,0,1,1.2-8.11,13.66,13.66,0,0,1,3.21-5.46,12.91,12.91,0,0,1,9.46-4,18.64,18.64,0,0,1,5.95,1,14.11,14.11,0,0,1,4.93,2.69,4.25,4.25,0,0,1-1.86,2.7,14.56,14.56,0,0,0-9.31-3.24,8.79,8.79,0,0,0-7.11,3.43q-2.79,3.44-2.79,11,0,14,10.24,14a22,22,0,0,0,7.5-1.17V204.4c0-1.44,0-2.42,0-2.94h-5.54a1.46,1.46,0,0,1-1.62-1.67A4.77,4.77,0,0,1,363.29,198.32Z"/>
        <path class="by-greensock-letter" d="M380.14,192.49a3.28,3.28,0,0,1,1.47-1.86,5.43,5.43,0,0,1,3.33,4.36q2.16-4.37,6.57-4.36a14.12,14.12,0,0,1,2.2.2,5.67,5.67,0,0,1-.78,3.18c-.33,0-.87,0-1.62,0-2.77,0-4.82,1.55-6.12,4.66V215a7.56,7.56,0,0,1-1.67.15,6.8,6.8,0,0,1-1.61-.15V197.49A7,7,0,0,0,380.14,192.49Z"/>
        <path class="by-greensock-letter" d="M415.67,204H400.28q.24,8.56,6.47,8.57a14.58,14.58,0,0,0,7.15-2.1,3.7,3.7,0,0,1,1.28,2.35,15.1,15.1,0,0,1-8.87,2.74,8.66,8.66,0,0,1-5.69-1.81,9.41,9.41,0,0,1-3.06-4.53,21.09,21.09,0,0,1-.86-6.3,14.73,14.73,0,0,1,2.62-9,9.3,9.3,0,0,1,14.09-.54,11.43,11.43,0,0,1,2.45,7.52A25.44,25.44,0,0,1,415.67,204ZM411,195.14a5,5,0,0,0-4.38-2.16,5.25,5.25,0,0,0-4.54,2.28,11.19,11.19,0,0,0-1.76,6.1h12.15v-.69A9.62,9.62,0,0,0,411,195.14Z"/>
        <path class="by-greensock-letter" d="M440.31,204H424.93q.24,8.56,6.46,8.57a14.58,14.58,0,0,0,7.16-2.1,3.65,3.65,0,0,1,1.27,2.35,15.08,15.08,0,0,1-8.87,2.74,8.64,8.64,0,0,1-5.68-1.81,9.41,9.41,0,0,1-3.06-4.53,20.78,20.78,0,0,1-.86-6.3,14.67,14.67,0,0,1,2.62-9,8.42,8.42,0,0,1,7.13-3.51,8.52,8.52,0,0,1,7,3,11.43,11.43,0,0,1,2.45,7.52A25.46,25.46,0,0,1,440.31,204Zm-4.7-8.87a5,5,0,0,0-4.39-2.16,5.24,5.24,0,0,0-4.53,2.28,11,11,0,0,0-1.76,6.1h12.15v-.69A9.62,9.62,0,0,0,435.61,195.14Z"/>
        <path class="by-greensock-letter" d="M466,198.13v12.35a11.62,11.62,0,0,0,.49,4.06,2.85,2.85,0,0,1-2.11.74c-1.14,0-1.71-.74-1.71-2.21V199.25a9,9,0,0,0-.79-4.38,3,3,0,0,0-2.84-1.3,9.57,9.57,0,0,0-4.26,1.1,11.2,11.2,0,0,0-3.63,2.82V215a9.32,9.32,0,0,1-3.33,0V191.12l.29-.29h1.28a1.57,1.57,0,0,1,1.42.54,3.36,3.36,0,0,1,.34,1.76v1a12.23,12.23,0,0,1,3.95-2.6,11.89,11.89,0,0,1,4.63-1,5.45,5.45,0,0,1,4.77,2.11A9.24,9.24,0,0,1,466,198.13Z"/>
        <path class="by-greensock-letter" d="M472.06,211.9a3.86,3.86,0,0,1,1.67-2.8,17,17,0,0,0,9.8,3.38,9.56,9.56,0,0,0,5.64-1.49,4.76,4.76,0,0,0,2.1-4.09c0-2.65-1.8-4.75-5.39-6.32l-5.73-2.5q-6.52-2.85-6.52-8.14a8.35,8.35,0,0,1,2.87-6.39,10.79,10.79,0,0,1,7.59-2.62,22.07,22.07,0,0,1,9.63,2.35,3.3,3.3,0,0,1-1.37,2.89,17.64,17.64,0,0,0-7.82-2.25,8.48,8.48,0,0,0-5.41,1.59,5,5,0,0,0-2,4.14q0,3.24,4.9,5.34l5.54,2.4q7.31,3.13,7.3,8.77a8.67,8.67,0,0,1-2.92,6.84q-2.91,2.56-8.87,2.57A18.32,18.32,0,0,1,472.06,211.9Z"/>
        <path class="by-greensock-letter" d="M520.13,203c0,4.34-1.14,7.68-3.43,10a9.89,9.89,0,0,1-13.37,0c-2.29-2.31-3.43-5.65-3.43-10s1.14-7.68,3.43-10a9.89,9.89,0,0,1,13.37,0Q520.14,196.46,520.13,203ZM510,193a5.33,5.33,0,0,0-5,2.92,14.64,14.64,0,0,0-1.59,7.1,14.37,14.37,0,0,0,1.59,7.06,5.89,5.89,0,0,0,9,1.35q2.68-2.7,2.69-8.43a14.58,14.58,0,0,0-1.59-7.08A5.34,5.34,0,0,0,510,193Z"/>
        <path class="by-greensock-letter" d="M540.32,199.3v-1a6.79,6.79,0,0,0-.37-1.93,4.62,4.62,0,0,0-1.64-2.23,5,5,0,0,0-3.28-1,5.13,5.13,0,0,0-4.49,2.65,13.7,13.7,0,0,0-1.69,7.37q0,4.72,1.67,7.13a5.26,5.26,0,0,0,4.56,2.4c1.92,0,4.1-.91,6.51-2.74a3.52,3.52,0,0,1,1.67,2.15,12.14,12.14,0,0,1-8.53,3.53,7.87,7.87,0,0,1-7.08-3.62,17,17,0,0,1-2.32-9.32c0-3.78.94-6.77,2.84-9a8.85,8.85,0,0,1,7-3.29,10,10,0,0,1,3.94.74,6.94,6.94,0,0,1,4.48,6.2c0,1.42-.6,2.13-1.81,2.13A8.27,8.27,0,0,1,540.32,199.3Z"/>
        <path class="by-greensock-letter" d="M564.13,206.26l2,4.41c.85,1.93,1.64,3.12,2.36,3.58a2.35,2.35,0,0,1-2,1,2.29,2.29,0,0,1-1.79-.59,7.9,7.9,0,0,1-1.1-1.91l-2.36-5.15a7.43,7.43,0,0,0-2-2.94,4.11,4.11,0,0,0-2.54-.73c-1.05,0-2.14,0-3.29.15V215a7.16,7.16,0,0,1-1.61.15,7.94,7.94,0,0,1-1.67-.15V179.26l.29-.29h1.23a1.57,1.57,0,0,1,1.42.54,3.41,3.41,0,0,1,.34,1.76v20l2.26-.14a1.2,1.2,0,0,0,1-.64l5.43-8a5.72,5.72,0,0,1,1.16-1.32,2.49,2.49,0,0,1,1.52-.39c.66,0,1.21,0,1.64,0l.29.39-6.42,9.26a5.57,5.57,0,0,1-1.08,1.22,5.67,5.67,0,0,1,2.82,1.37A10.09,10.09,0,0,1,564.13,206.26Z"/>
      </g>
      <g id="logo-mouse">
        <rect id="mouse-outline" x="608.23" y="22.73" width="115.94" height="191.75" rx="57.97"/>
        <rect id="mouse-wheel" x="658.65" y="57.48" width="15" height="39.31" rx="7.5"/>
      </g>
</svg>
        </a>
      </header>

      <div className="wrap-bg blue">
      </div>

      <div className="wrap">

      <section className="section flex-center column">
        <h1>Basic ScrollTrigger with React</h1>
        <h2>Scroll down to see the magic happen!!</h2>
      </section>
      <div className="section flex-center column" ref={main}>
        <h1>This boxes animates as you scroll!</h1>
        <div className="box">box</div>
        <div className="box">box</div>
        <div className="box">box</div>
      </div>
      <section className="section flex-center column">
        <h1>The End!</h1>
        <h2>
          For more information visit:{' '}
          <a
            href="https://greensock.com/scrolltrigger/"
            target="_blank"
            rel="noreferrer"
          >
            greensock.com/scrolltrigger/
          </a>
        </h2>
      </section>
      </div>
    </div>
  );
}
